{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./AudioPlayer.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioPlayer=_ref=>{let{audioUrl,message,onPlaybackComplete}=_ref;const[isPlaying,setIsPlaying]=useState(false);const[currentTime,setCurrentTime]=useState(0);const[duration,setDuration]=useState(0);const audioRef=useRef(null);useEffect(()=>{if(audioUrl&&audioRef.current){audioRef.current.src=audioUrl;audioRef.current.load();}},[audioUrl]);const handleTimeUpdate=()=>{if(audioRef.current){setCurrentTime(audioRef.current.currentTime);}};const handleLoadedMetadata=()=>{if(audioRef.current){setDuration(audioRef.current.duration);}};const handleEnded=()=>{setIsPlaying(false);setCurrentTime(0);if(onPlaybackComplete){onPlaybackComplete();}};const togglePlayPause=()=>{if(audioRef.current){if(isPlaying){audioRef.current.pause();setIsPlaying(false);}else{audioRef.current.play();setIsPlaying(true);}}};const handleProgressClick=e=>{if(audioRef.current&&duration>0){const rect=e.currentTarget.getBoundingClientRect();const clickX=e.clientX-rect.left;const width=rect.width;const newTime=clickX/width*duration;audioRef.current.currentTime=newTime;setCurrentTime(newTime);}};const formatTime=time=>{const minutes=Math.floor(time/60);const seconds=Math.floor(time%60);return`${minutes}:${seconds.toString().padStart(2,'0')}`;};if(!audioUrl){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"audio-player\",children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,onTimeUpdate:handleTimeUpdate,onLoadedMetadata:handleLoadedMetadata,onEnded:handleEnded,preload:\"metadata\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ai-avatar\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"40\",height:\"40\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V7H21V9ZM3 19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V11H3V19ZM12 13.5C13.4 13.5 14.5 14.6 14.5 16S13.4 18.5 12 18.5 9.5 17.4 9.5 16 10.6 13.5 12 13.5Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"response-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"AI Response\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"response-message\",children:message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:`play-button ${isPlaying?'playing':''}`,onClick:togglePlayPause,children:isPlaying?/*#__PURE__*/_jsxs(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"6\",y:\"4\",width:\"4\",height:\"16\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"14\",y:\"4\",width:\"4\",height:\"16\"})]}):/*#__PURE__*/_jsx(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"8,5 19,12 8,19\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time current-time\",children:formatTime(currentTime)}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",onClick:handleProgressClick,children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:duration>0?`${currentTime/duration*100}%`:'0%'}})}),/*#__PURE__*/_jsx(\"span\",{className:\"time duration\",children:formatTime(duration)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"player-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Listen to this supportive response. You matter, and help is available.\"})})]});};export default AudioPlayer;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","AudioPlayer","_ref","audioUrl","message","onPlaybackComplete","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","audioRef","current","src","load","handleTimeUpdate","handleLoadedMetadata","handleEnded","togglePlayPause","pause","play","handleProgressClick","e","rect","currentTarget","getBoundingClientRect","clickX","clientX","left","width","newTime","formatTime","time","minutes","Math","floor","seconds","toString","padStart","className","children","ref","onTimeUpdate","onLoadedMetadata","onEnded","preload","height","viewBox","fill","d","onClick","x","y","points","style"],"sources":["/Users/jiginvp/react/AICompetition/empathy-ai/src/components/AudioPlayer.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './AudioPlayer.css';\n\ninterface AudioPlayerProps {\n  audioUrl: string | null;\n  message?: string;\n  onPlaybackComplete?: () => void;\n}\n\nconst AudioPlayer: React.FC<AudioPlayerProps> = ({ audioUrl, message, onPlaybackComplete }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n\n  useEffect(() => {\n    if (audioUrl && audioRef.current) {\n      audioRef.current.src = audioUrl;\n      audioRef.current.load();\n    }\n  }, [audioUrl]);\n\n  const handleTimeUpdate = () => {\n    if (audioRef.current) {\n      setCurrentTime(audioRef.current.currentTime);\n    }\n  };\n\n  const handleLoadedMetadata = () => {\n    if (audioRef.current) {\n      setDuration(audioRef.current.duration);\n    }\n  };\n\n  const handleEnded = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n    if (onPlaybackComplete) {\n      onPlaybackComplete();\n    }\n  };\n\n  const togglePlayPause = () => {\n    if (audioRef.current) {\n      if (isPlaying) {\n        audioRef.current.pause();\n        setIsPlaying(false);\n      } else {\n        audioRef.current.play();\n        setIsPlaying(true);\n      }\n    }\n  };\n\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (audioRef.current && duration > 0) {\n      const rect = e.currentTarget.getBoundingClientRect();\n      const clickX = e.clientX - rect.left;\n      const width = rect.width;\n      const newTime = (clickX / width) * duration;\n      audioRef.current.currentTime = newTime;\n      setCurrentTime(newTime);\n    }\n  };\n\n  const formatTime = (time: number) => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  if (!audioUrl) {\n    return null;\n  }\n\n  return (\n    <div className=\"audio-player\">\n      <audio\n        ref={audioRef}\n        onTimeUpdate={handleTimeUpdate}\n        onLoadedMetadata={handleLoadedMetadata}\n        onEnded={handleEnded}\n        preload=\"metadata\"\n      />\n      \n      <div className=\"player-header\">\n        <div className=\"ai-avatar\">\n          <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V7H21V9ZM3 19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V11H3V19ZM12 13.5C13.4 13.5 14.5 14.6 14.5 16S13.4 18.5 12 18.5 9.5 17.4 9.5 16 10.6 13.5 12 13.5Z\"/>\n          </svg>\n        </div>\n        <div className=\"response-info\">\n          <h3>AI Response</h3>\n          {message && <p className=\"response-message\">{message}</p>}\n        </div>\n      </div>\n\n      <div className=\"player-controls\">\n        <button \n          className={`play-button ${isPlaying ? 'playing' : ''}`}\n          onClick={togglePlayPause}\n        >\n          {isPlaying ? (\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"/>\n              <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"/>\n            </svg>\n          ) : (\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <polygon points=\"8,5 19,12 8,19\"/>\n            </svg>\n          )}\n        </button>\n\n        <div className=\"progress-container\">\n          <span className=\"time current-time\">{formatTime(currentTime)}</span>\n          <div className=\"progress-bar\" onClick={handleProgressClick}>\n            <div \n              className=\"progress-fill\"\n              style={{ \n                width: duration > 0 ? `${(currentTime / duration) * 100}%` : '0%' \n              }}\n            />\n          </div>\n          <span className=\"time duration\">{formatTime(duration)}</span>\n        </div>\n      </div>\n\n      <div className=\"player-footer\">\n        <p>Listen to this supportive response. You matter, and help is available.</p>\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}